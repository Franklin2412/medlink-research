<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SpeakEasy Studio üé§ - MedLink Research</title>
    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Fredoka+One&family=Poppins:wght@400;600;700&display=swap"
        rel="stylesheet">

    <link rel="stylesheet" href="../shared/css/common.css">
    <link rel="stylesheet" href="../shared/css/gesture-style.css">
    <link rel="stylesheet" href="css/speakeasy.css">
</head>

<body class="full-screen-game">
    <!-- Skip link -->

    <div class="app-layout">
        <!-- Main Content Area -->
        <div class="main-canvas">
            <main id="main-content">
                <section id="welcome-screen" class="screen active">
                    <div class="container">
                        <div class="card welcome-card text-center">
                            <div class="welcome-icon">üó£Ô∏è</div>
                            <h2>Welcome to SpeakEasy Studio</h2>
                            <p>Practice your speech and language skills with fun sound adventures!</p>
                            <div class="activity-grid">
                                <div class="card activity-card" id="start-phonics">
                                    <div class="activity-icon">üî§</div>
                                    <h3>Phonics Fun</h3>
                                    <p>Match sounds to letters and images.</p>
                                    <button class="btn btn-primary mt-md">Start Matching</button>
                                </div>
                                <div class="card activity-card" id="start-word-echo">
                                    <div class="activity-icon">üîÅ</div>
                                    <h3>Word Echo</h3>
                                    <p>Listen carefully and repeat the word!</p>
                                    <button class="btn btn-primary mt-md">Start Repeating</button>
                                </div>
                            </div>
                        </div>
                    </div>
                </section>

                <section id="game-screen" class="screen">
                    <div class="container">
                        <div class="card game-card">
                            <div class="game-board-header text-center mb-lg">
                                <div id="instruction" class="text-xl font-bold">Listen and pick the correct letter!
                                </div>
                            </div>

                            <div id="sound-target" class="text-center mb-xl">
                                <button id="play-sound-btn" class="btn btn-large btn-accent">
                                    <span class="icon-pulse">üîä</span> Play Sound
                                </button>
                            </div>

                            <div id="options-grid" class="flex-center"
                                style="gap: 2rem; flex-wrap: wrap; margin-top: 3rem;">
                                <!-- Options will be generated here -->
                            </div>
                        </div>
                    </div>
                </section>

                <section id="echo-screen" class="screen">
                    <div class="container">
                        <div class="card game-card text-center">
                            <div class="echo-header mb-lg">
                                <h2 id="echo-word-display">Get Ready!</h2>
                                <p id="echo-status">Press the button and listen...</p>
                            </div>

                            <div class="echo-visualizer-container mb-xl"
                                style="height: 120px; display: flex; align-items: center; justify-content: center;">
                                <!-- Unified Stage -->
                                <div id="echo-visualizer" class="echo-visualizer hidden">
                                    <div class="wave-bar"></div>
                                    <div class="wave-bar"></div>
                                    <div class="wave-bar"></div>
                                    <div class="wave-bar"></div>
                                    <div class="wave-bar"></div>
                                </div>
                                <div id="mic-indicator" class="mic-indicator hidden">
                                    <div class="mic-pulse">üé§</div>
                                </div>
                                <div id="echo-idle-icon" class="text-4xl opacity-50">
                                    üëÇ
                                </div>
                            </div>

                            <!-- Feedback Center -->
                            <div id="echo-feedback" class="mb-lg text-xl font-bold" style="min-height: 1.5em;"></div>
                            <p id="mic-listening-text" class="mb-lg hidden">Listening for you...</p>

                            <!-- Actions Middle -->
                            <div class="echo-actions flex justify-center gap-md mb-xl">
                                <button id="echo-listen-btn" class="btn btn-large btn-accent">
                                    <span class="icon-pulse">üîä</span> Hear Word
                                </button>
                                <button id="echo-skip-btn" class="btn btn-large btn-secondary">
                                    <span>‚è≠Ô∏è</span> Skip Word
                                </button>
                            </div>

                            <!-- Controls Bottom -->
                            <div class="echo-controls border-t pt-lg mt-lg">
                                <div class="mb-lg hidden"> <!-- Hidden as per user request -->
                                    <label for="language-select" class="block mb-sm font-bold">Language / ‡ÆÆ‡Øä‡Æ¥‡Æø:</label>
                                    <select id="language-select" class="language-dropdown">
                                        <option value="en-US">English</option>
                                        <option value="ta-IN">Tamil (‡Æ§‡ÆÆ‡Æø‡Æ¥‡Øç)</option>
                                    </select>
                                </div>

                                <label for="duration-slider" class="block mb-sm text-sm text-gray-500">Speech Duration:
                                    <span id="duration-val">3</span>s</label>
                                <input type="range" id="duration-slider" min="1" max="10" value="3" class="slider">
                                <div class="flex justify-between text-xs text-gray-400 mt-xs">
                                    <span>Fast (1s)</span>
                                    <span>Slow (10s)</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </section>
            </main>
        </div>

        <!-- Right Side Controls -->
        <aside class="side-controls">
            <h3>Navigation</h3>
            <a href="../index.html" class="btn btn-secondary">üè† Home</a>
            <button class="btn btn-accent hidden" id="back-to-menu-btn">‚¨ÖÔ∏è Back to Menu</button>
            <button class="btn btn-accent" id="progress-btn">üìä Progress</button>

            <div id="game-info-display" class="mt-md text-center">
                <!-- Stats or info here -->
            </div>

            <div class="camera-dock" id="gesture-camera-dock">
                <!-- Camera feed will dock here -->
            </div>
        </aside>
    </div>

    <script src="../shared/js/storage.js"></script>
    <script src="../shared/js/gesture-engine.js"></script>
    <script src="js/phonics.js"></script>
    <script src="js/word-echo.js"></script>
    <script src="js/app.js"></script>
</body>

</html>